<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>SL Skills Hub</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      background-color: #fff;
    }
    header {
      background-color: #007bff;
      color: white;
      padding: 20px;
      text-align: center;
    }
    header h1 {
      margin: 0;
      font-size: 2.5em;
    }
    header p {
      margin: 5px 0 0;
      font-size: 1.2em;
      font-weight: bold;
    }
    #authSection {
      position: absolute;
      top: 10px;
      left: 10px;
      text-align: left;
    }
    #authSection img {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: block;
      margin-bottom: 5px;
    }
    #addSkillSection, #skillsSection {
      margin: 20px auto;
      width: 90%;
      max-width: 600px;
      text-align: center;
    }
    #skillsContainer {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }
    .skill-card {
      border: 1px solid #ccc;
      border-radius: 10px;
      padding: 15px;
      text-align: left;
      background: #f9f9f9;
    }
    .skill-card img {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      display: block;
      margin-bottom: 10px;
    }
    button {
      background: #007bff;
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 6px;
      cursor: pointer;
      margin: 5px 0;
    }
    button:hover {
      background: #0056b3;
    }
    input, select {
      width: 95%;
      padding: 8px;
      margin: 5px 0;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    .search-bar {
      margin-top: 10px;
      width: 90%;
      max-width: 400px;
    }
  </style>
</head>
<body>
  <header>
    <h1>SL Skills Hub</h1>
    <p>find talented people near you</p>
    <input type="text" id="searchBar" class="search-bar" placeholder="Search skills...">
    <div>
      <button onclick="toggleAddSkill()">Add a Skill</button>
    </div>
  </header>

  <div id="authSection">
    <img id="userPic" src="" style="display:none;">
    <p id="userName"></p>
    <button id="loginBtn" onclick="login()">Login with Google</button>
    <button id="logoutBtn" onclick="logout()" style="display:none;">Logout</button>
  </div>

  <div id="addSkillSection" style="display:none;">
    <h2>Add Skill</h2>
    <input type="text" id="nameInput" placeholder="Your Name">
    <input type="text" id="skillInput" placeholder="Your Skill">
    <input type="text" id="locationInput" placeholder="Your Location">
    <input type="text" id="whatsappInput" placeholder="WhatsApp Contact">
    <select id="categoryInput"></select>
    <button onclick="saveSkill()">Save Skill</button>
  </div>

  <div id="skillsSection">
    <div id="skillsContainer"></div>
  </div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>

  <script>
    // Firebase Config
    const firebaseConfig = {
  apiKey: "AIzaSyBWy9ffEDL3OugOpRbHrvDjGbQ3fkPGU4Y",
  authDomain: "sl-skills-hub.firebaseapp.com",
  projectId: "sl-skills-hub",
  storageBucket: "sl-skills-hub.firebasestorage.app",
  messagingSenderId: "125049368940",
  appId: "1:125049368940:web:76d4a47aa9eb7c43914349"
};
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();

    const adminUID = "I5WY1FJzNibUDOCzCBdGWPtX9Nj1";
    let currentUser = null;

    // Categories A-Z
    const categories = {
      "A": ["Accounting","Acting","Advertising","Agriculture","Animation","Architecture","Art","Automotive Repair"],
      "B": ["Baking","Banking","Barbing","Blogging","Bookkeeping","Broadcasting","Business Development"],
      "C": ["Carpentry","Catering","Coaching","Communication","Computer Repair","Construction","Cooking","Copywriting","Counseling","Cybersecurity"],
      "D": ["Dancing","Data Analysis","Decorating","Design","Digital Marketing","Driving"],
      "E": ["Economics","Editing","Education","Electrical Work","Engineering","Entrepreneurship","Event Planning","Exercise Training"],
      "F": ["Farming","Fashion Design","Filmmaking","Finance","Fishing","Fitness","Food Processing","Freelancing"],
      "G": ["Gardening","Game Development","Graphic Design","Guiding/Tourism"],
      "H": ["Hairdressing","Handyman Services","Health Care","Hospitality","Human Resources","Hydraulics"],
      "I": ["Illustration","Interior Design","IT Support","Investing","Innovation"],
      "J": ["Journalism","Jewelry Making","Judicial/Legal Services"],
      "K": ["Knitting","Karate","Knowledge Management"],
      "L": ["Language Teaching","Law","Leadership","Logistics","Landscaping","Literature Writing"],
      "M": ["Makeup","Marketing","Masonry","Mechanics","Medicine","Music","Management","Mobile App Development","Machine Learning"],
      "N": ["Nursing","Negotiation","Networking","Nutrition","Nonprofit Management"],
      "O": ["Office Administration","Oil & Gas","Online Business","Operations","Optometry"],
      "P": ["Painting","Photography","Plumbing","Project Management","Programming","Public Speaking","Publishing"],
      "Q": ["Quality Assurance","Quilting"],
      "R": ["Real Estate","Research","Robotics","Restaurant Services","Retail","Risk Management"],
      "S": ["Sales","Sculpture","Sewing/Tailoring","Singing","Social Media","Software Development","Sports","Surveying","System Administration"],
      "T": ["Teaching","Translation","Typing","Tailoring","Tourism","Training","Transportation","Tech Support"],
      "U": ["UI/UX Design","Urban Planning","Upholstery"],
      "V": ["Video Editing","Veterinary","Volunteering","Virtual Assistance","Voice Acting"],
      "W": ["Web Development","Welding","Woodworking","Writing","Water Engineering"],
      "X": ["X-ray Technician","XML/Database Skills"],
      "Y": ["Yoga","Youth Mentorship","YouTube Content Creation"],
      "Z": ["Zoology","Zumba Training"]
    };

    function populateCategories() {
      const select = document.getElementById("categoryInput");
      select.innerHTML = "";
      for (let letter in categories) {
        const group = document.createElement("optgroup");
        group.label = letter;
        categories[letter].forEach(cat => {
          const option = document.createElement("option");
          option.value = cat;
          option.textContent = cat;
          group.appendChild(option);
        });
        select.appendChild(group);
      }
    }
    populateCategories();

    // Auth
    function login() {
      const provider = new firebase.auth.GoogleAuthProvider();
      auth.signInWithPopup(provider);
    }
    function logout() {
      auth.signOut();
    }

    auth.onAuthStateChanged(user => {
      currentUser = user;
      if (user) {
        document.getElementById("loginBtn").style.display = "none";
        document.getElementById("logoutBtn").style.display = "block";
        document.getElementById("userPic").style.display = "block";
        document.getElementById("userPic").src = user.photoURL;
        document.getElementById("userName").innerText = user.displayName;
      } else {
        document.getElementById("loginBtn").style.display = "block";
        document.getElementById("logoutBtn").style.display = "none";
        document.getElementById("userPic").style.display = "none";
        document.getElementById("userName").innerText = "";
      }
      loadSkills();
    });

    // Toggle Add Skill
    function toggleAddSkill() {
      document.getElementById("addSkillSection").style.display =
        document.getElementById("addSkillSection").style.display === "none" ? "block" : "none";
    }

    // Save Skill
    function saveSkill() {
      if (!currentUser) return alert("Login first!");
      const name = document.getElementById("nameInput").value;
      const skill = document.getElementById("skillInput").value;
      const location = document.getElementById("locationInput").value;
      const whatsapp = document.getElementById("whatsappInput").value;
      const category = document.getElementById("categoryInput").value;
      const date = new Date().toLocaleDateString();
      const pic = currentUser.photoURL;

      db.collection("skills").add({
        uid: currentUser.uid,
        name, skill, location, whatsapp, category, date, pic
      });
    }

    // Load Skills
    function loadSkills() {
      db.collection("skills").onSnapshot(snapshot => {
        const container = document.getElementById("skillsContainer");
        container.innerHTML = "";
        snapshot.forEach(doc => {
          const data = doc.data();
          const card = document.createElement("div");
          card.className = "skill-card";
          card.innerHTML = `
            <img src="${data.pic || ''}">
            <p><b>Name:</b> ${data.name}</p>
            <p><b>Skill:</b> ${data.skill}</p>
            <p><b>Location:</b> ${data.location}</p>
            <p><b>WhatsApp:</b> ${data.whatsapp}</p>
            <p><b>Date:</b> ${data.date}</p>
            <p><b>Category:</b> ${data.category}</p>
          `;
          if (currentUser && currentUser.uid === data.uid) {
            const editBtn = document.createElement("button");
            editBtn.textContent = "Edit";
            editBtn.onclick = () => editSkill(doc.id, data);
            const delBtn = document.createElement("button");
            delBtn.textContent = "Delete";
            delBtn.onclick = () => db.collection("skills").doc(doc.id).delete();
            card.appendChild(editBtn);
            card.appendChild(delBtn);
          }
          container.appendChild(card);
        });
      });
    }

    // Edit Skill
    function editSkill(id, data) {
      const name = prompt("Edit Name:", data.name);
      const skill = prompt("Edit Skill:", data.skill);
      const location = prompt("Edit Location:", data.location);
      const whatsapp = prompt("Edit WhatsApp:", data.whatsapp);
      const category = prompt("Edit Category:", data.category);
      const pic = prompt("Edit Picture Link:", data.pic);
      db.collection("skills").doc(id).update({
        name, skill, location, whatsapp, category, pic
      });
    }

    // Search
    document.getElementById("searchBar").addEventListener("input", function() {
      const query = this.value.toLowerCase();
      document.querySelectorAll(".skill-card").forEach(card => {
        card.style.display = card.innerText.toLowerCase().includes(query) ? "block" : "none";
      });
    });
  </script>
</body>
</html>

